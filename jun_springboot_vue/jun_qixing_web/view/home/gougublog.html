<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>å‹¾è‚¡åšå®¢</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0">
  <link rel="stylesheet" href="../../assets/gougu/css/gougu.css">
  <style>
    .dashboard-num table {width: 100%;}
    .dashboard-num td {text-align: center; padding: 16px 0; width: 20%;border-left: 1px solid #f1f1f1; position: relative;}
    .dashboard-num td:nth-child(1) { border-left: none}
    .dashboard-num .num-title { padding-bottom: 10px; color: #999;}
    .dashboard-num .blue {font-size: 18px; font-weight: 300;}
    .dashboard-num td .badge {position: absolute;top: 0; right: 0;}
    .dashboard-num td .badge span { padding: 2px 4px; font-size: 12px; border-radius: 0 0 0 4px;}
    .dashboard-total td {border-top: 1px solid #f1f1f1}
    .dashboard-logs .layui-timeline-item {padding-bottom: 1px;}
    .info-td { width: 90px; text-align: right;background-color: #fafafa; color: #999; padding: 5px 3px;}
    .info-td {width: 90px; text-align: right;background-color: #fafafa; color: #999; padding: 5px 3px;}
    .info-msg-list li{position:relative;padding:10px 0;border-bottom:1px solid #EEE}
    .info-msg-list li h3{padding-bottom:5px;font-weight:700}
    .info-msg-list li p{padding-bottom:10px}
    .info-msg-list li>span{color:#999}
    .info-msg-list .msg-reply{display:none;position:absolute;right:0;bottom:12px}
    .info-msg-list li:hover .msg-reply{display:block}
  </style>
</head>

<body>
  <div class="p-3">
    <div class="layui-row layui-col-space12">
      <div class="layui-col-md8">
        <div class="layui-row layui-col-space12">
          <div class="layui-col-md12">
            <div class="layui-card dashboard-num">
              <table>
                <tr>
                  <td>
                    <div class="num-title">ç³»ç»Ÿç”¨æˆ·</div>
                    <div class="blue">2</div>
                  </td>
                  <td>
                    <div class="num-title">æ³¨å†Œç”¨æˆ·</div>
                    <div class="blue">33</div>
                  </td>
                  <td>
                    <div class="num-title">æ–‡ç« </div>
                    <div class="blue">130</div>
                  </td>
                  <td>
                    <div class="num-title">åŠ¨æ€</div>
                    <div class="blue">66</div>
                  </td>
                  <td>
                    <div class="num-title">å›¾ç‰‡</div>
                    <div class="blue">59</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="layui-card">
              <div class="layui-card-title">æ³¨å†Œç”¨æˆ·</div>
              <div class="p-3">
                <table id="userList" lay-filter="UserList" class="layui-hide"></table>
              </div>
            </div>
            <div class="layui-card">
              <div class="layui-card-title">æ–‡ç« åˆ—è¡¨</div>
              <div class="p-3">
                <table id="article" lay-filter="article" class="layui-hide"></table>
              </div>
            </div>
            <div class="layui-card">
              <div id="chartView" style="width: 100%;height:300px;"></div>
            </div>
            <div class="layui-card">
              <div id="chartYear" style="width: 100%;height:240px;"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="layui-col-md4">
        <div class="layui-card">
          <div class="layui-card-title">ç³»ç»Ÿä¿¡æ¯</div>
          <div class="layui-card-body">
            <table class="layui-table" lay-skin="" lay-size="sm">
              <tr>
                <td colspan="4" style="color: #E94335; background-color:#f8f8f8">
                  æé†’ï¼šå‘ç°appç›®å½•ä¸‹çš„installæ–‡ä»¶å¤¹æ²¡åˆ é™¤ï¼Œä¸ºäº†ç³»ç»Ÿçš„å®‰å…¨,è¯·æ‰‹åŠ¨å»åˆ é™¤ã€‚</td>
              </tr>
              <tr>
                <td class="info-td">æœåŠ¡å™¨ç³»ç»Ÿ</td>
                <td>Linux</td>
                <td class="info-td">PHPç‰ˆæœ¬</td>
                <td>7.2.33</td>
              </tr>
              <tr>
                <td class="info-td">ä¸Šä¼ é™„ä»¶é™åˆ¶</td>
                <td>50M</td>
                <td class="info-td">æ‰§è¡Œæ—¶é—´é™åˆ¶</td>
                <td>300ç§’ </td>
              </tr>
              <tr>
                <td class="info-td">å‹¾è‚¡BLOGç‰ˆæœ¬</td>
                <td colspan="3">2.4.26<a class="layui-badge layui-bg-blue" style="margin-left:8px"
                    href="https://blog.gougucms.com/home/book/detail/bid/2.html" target="_blank">å‹¾è‚¡BLOGæ–‡æ¡£</a></td>
              </tr>
              <tr>
                <td class="info-td">ThinkPHPç‰ˆæœ¬</td>
                <td colspan="3">6.0.12LTS<a class="layui-badge layui-bg-blue" style="margin-left:8px"
                    href="https://www.kancloud.cn/manual/thinkphp6_0" target="_blank">TP6æ–‡æ¡£</a></td>
              </tr>
              <tr>
                <td class="info-td">Layuiç‰ˆæœ¬</td>
                <td colspan="3">2.6.8<a class="layui-badge layui-bg-blue" style="margin-left:8px"
                    href="https://www.layui.site/doc/" target="_blank">Layuiæ–‡æ¡£</a></td>
              </tr>
              <tr>
                <td class="info-td">BUGåé¦ˆ</td>
                <td colspan="3"><a href="mailto:hdm58@qq.com" target="_blank">hdm58@qq.com</a></td>
              </tr>
              <tr>
                <td class="info-td">QQäº¤æµç¾¤</td>
                <td colspan="3">æœQç¾¤ï¼š24641076ï¼Œæˆ–ç‚¹å‡» <a href="https://jq.qq.com/?_wv=1027&k=pxshRv6I" target="_blank"
                    rel="nofollow"><img border="0" src="//pub.idqqimg.com/wpa/images/group.png" alt="gougucmsäº¤æµç¾¤"
                      title="gougucmsäº¤æµç¾¤" style="vertical-align:middle"></a></td>
              </tr>
              <tr>
                <td class="info-td">åŒç³»åˆ—å¼€æºè½¯ä»¶</td>
                <td colspan="3"><a class="layui-badge layui-bg-blue" style="margin-right:8px"
                    href="https://gitee.com/gougucms/gougucms" target="_blank">å‹¾è‚¡CMS</a><a
                    class="layui-badge layui-bg-blue" style="margin-right:8px" href="https://gitee.com/gougucms/office"
                    target="_blank">å‹¾è‚¡OA</a><a class="layui-badge layui-bg-blue" href="https://gitee.com/gougucms/dev"
                    target="_blank">å‹¾è‚¡DEV</a></td>
              </tr>
              <tr>
                <td class="info-td">ğŸ—ğŸ—<br />ç»™ä½œè€…åŠ é¸¡è…¿<br />ğŸ—ğŸ—</td>
                <td colspan="3">
                  <img src="https://www.gougucms.com/static/home/images/zfb.png" data-event="pay"
                    style="width:50%; max-width:100%; cursor:pointer;" align=center /><img
                    src="https://www.gougucms.com/static/home/images/wx.png" data-event="pay"
                    style="width:50%; max-width:100%; cursor:pointer;" align=center />
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="layui-card">
          <div class="layui-card-title">ç”¨æˆ·ç•™è¨€</div>
          <div class="layui-card-body">
            <ul class="info-msg-list">
              <li>
                <h3>ç´ è¿˜çœŸ</h3>
                <p>è¿·æƒ˜æ—¶ï¼Œä¸è¦æƒ³å¤ªå¤šï¼Œåªè¦å¾ªå¿ƒè€Œå¾€ï¼Œé‚£å°±æ˜¯æ–¹å‘äº†â€¦</p>
                <span>5æœˆ16æ—¥14:26</span>
                <a href="javascript:;" gg-event="reply" data-id="8"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>å¿Œéœæ®‡</h3>
                <p>æ¯ä¸€ä¸ªäººçš„å¿ƒä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªéšå¯†çš„è§’è½ï¼Œä»–ä¸æƒ³æ‰“å¼€è®©äººå‘ç°ã€‚å› ä¸ºå‘ç°ä¸ä»£è¡¨ç…§è¿›æ¥çš„å°±æ˜¯é˜³å…‰ï¼Œæˆ–è®¸æ›´æ˜¯é»‘æš—ã€‚æ‰€ä»¥ï¼Œä»–æ©é¥°ã€éšè—ã€‚ä½†åˆä½•å¦¨ï¼Œäººæœ¬å°±ä¸éšè—å…±åŒç”Ÿæ´»ã€‚</p>
                <span>5æœˆ15æ—¥ 18:25</span>
                <a href="javascript:;" gg-event="reply" data-id="7"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>æŠšæ£ºä¸åŒ–è¶</h3>
                <p>äººç”Ÿï¼Œæ²¡æœ‰è°å¿…é¡»ä¸ºå¦ä¸€ä¸ªäººè´Ÿèµ·è´£ä»»çš„é“ç†ã€‚ æ³¨å®šçš„ç¼˜åˆ†ï¼Œä¸ç®¡é”™ç”Ÿå‡ æ¬¡ï¼Œè¿˜æ˜¯ä¼šç›¸é‡çš„ã€‚</p>
                <span>5æœˆ12æ—¥ 15:53</span>
                <a href="javascript:;" gg-event="reply" data-id="6"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>å®«æ— å</h3>
                <p>ä½ ä»¥ä¸ºåªè¦é•¿å¾—æ¼‚äº®å°±æœ‰ç”·ç”Ÿå–œæ¬¢ï¼Ÿä½ ä»¥ä¸ºåªè¦æœ‰äº†é’±æ¼‚äº®å¦¹å­å°±è‡ªå·±è´´ä¸Šæ¥äº†ï¼Ÿä½ ä»¥ä¸ºå­¦éœ¸å°±èƒ½æ‰¾åˆ°å¥½å·¥ä½œï¼Ÿæˆ‘å‘Šè¯‰ä½ å§ï¼Œè¿™äº›éƒ½æ˜¯çœŸçš„ï¼</p>
                <span>5æœˆ10æ—¥ 09:22</span>
                <a href="javascript:;" gg-event="reply" data-id="5"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>å—é£ä¸ç«</h3>
                <p>æœ‰å¿ƒå¤©ä¸‹ï¼Œå´è¾“ä¸€ç¬”å¤šæƒ…ï¼Œæˆ‘çš„å±±æ°´è½åœ¨ä½ çš„çœ‰é—´ï¼Œä½ è‚¯å…¥ç”»å—ï¼Ÿ</p>
                <span>4æœˆ29æ—¥ 10:11</span>
                <a href="javascript:;" gg-event="reply" data-id="2"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>çš‡ç”«ç¬‘ç¦…</h3>
                <p>ä¸€ä¸ªäººè¦é€€åˆ°å“ªé‡Œï¼Œæ‰ä¸æ˜¯æ±Ÿæ¹–ã€‚</p>
                <span>4æœˆ28æ—¥ 10:02</span>
                <a href="javascript:;" gg-event="reply" data-id="4"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
              <li>
                <h3>å€¦æ”¶å¤©</h3>
                <p>å½“åˆçš„æ™¯ï¼Œå½“åˆçš„äººï¼Œçš†å·²ä¸å¤å½“åˆï¼Œå°±è¿å½“åˆçš„è®°å¿†ï¼Œä¹Ÿå¼€å§‹æ¨¡ç³Šã€‚</p>
                <span>4æœˆ15æ—¥ 09:10</span>
                <a href="javascript:;" gg-event="reply" data-id="1"
                  class="layui-btn layui-btn-xs msg-reply">å›å¤</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="../../assets/third_party/echart/echarts.min.js"></script>
  <script>
    const moduleInit = ['tool'];
    function gouguInit() {
      var layer = layui.layer, table = layui.table;
      //æ³¨å†Œç”¨æˆ·
      table.render({
        elem: '#userList'
        , url: "../../json/blog_user.json"
        , page: false //å¼€å¯åˆ†é¡µ
        , cols: [[ //è¡¨å¤´
          { field: 'username', title: 'ç”¨æˆ·å' }
          , { field: 'username', title: 'æ˜µç§°', align: 'center', 'width': 120 }
          , {
            field: 'sex', title: 'æ€§åˆ«', 'width': 60, align: 'center', templet: function (d) {
              let str = '-';
              if (d.sex == 1) {
                str = 'ç”·';
              }
              else if (d.sex == 2) {
                str = 'å¥³';
              }
              return str;
            }
          }
          , {
            field: 'headimgurl', title: 'å¤´åƒ', align: 'center', 'width': 60, templet: function (d) {
              return '<img src="https://blog.gougucms.com' + d.headimgurl + '" width="20" height="20" />';
            }
          }
          , { field: 'login_num', title: 'ç™»å½•æ¬¡æ•°', align: 'center', 'width': 90 }
          , { field: 'last_login_time', title: 'æœ€åç™»å½•æ—¶é—´', align: 'center', 'width': 160 }
        ]]
      });

      //æ–‡ç« 
      table.render({
        elem: '#article'
        , url: "../../json/blog_article.json"
        , page: false //å¼€å¯åˆ†é¡µ
        , cols: [[ //è¡¨å¤´
          { field: 'title', title: 'æ–‡ç« æ ‡é¢˜', templet: '<div><a href="https://blog.gougucms.com/home/index/detail/id/{{d.id}}.html" class="layui-table-link" target="_blank">{{d.title}}</a></div>' }
          , { field: 'cate_title', title: 'æ–‡ç« åˆ†ç±»', align: 'center', 'width': 100 }
          , { field: 'read', title: 'è®¿é—®é‡', align: 'center', 'width': 80 }
          , { field: 'create_time', title: 'å‘å¸ƒæ—¶é—´', align: 'center', 'width': 160 }
        ]]
      });
      $('body').on('click', '[data-event="pay"]', function () {
        var src = $(this).attr('src');
        layer.open({
          type: 1,
          title: 'æ„Ÿè°¢æ‚¨ç»™ä½œè€…åŠ é¸¡è…¿ğŸ—ğŸ—',
          content: '<img src="' + src + '" style="width:100%" align=center />',
        });
      })
      get_view_data();
    }


    function setHour(num) {
      var str = num + ':00';
      if (num < 10) {
        str = '0' + num + ':00';
      }
      return str;
    }
    var chartView = echarts.init(document.getElementById('chartView'));
    function get_view_data() {
      $.ajax({
        url: "../../json/blog_data.json",
        type: 'get',
        data: {},
        success: function (e) {
          if (e.code == 0) {
            var data_first = e.data.data_first;
            var data_second = e.data.data_second;
            archiveCalendar = e.data.data_three;
            var myDate = new Date();
            var nowHour = myDate.getHours(); //è·å–å½“å‰å°æ—¶æ•°(0-23)
            var xData = [];
            var yData1 = [];
            var yData2 = [];
            $.each(data_first, function (key, value) {
              if (key <= nowHour) {
                yData1.push(value);
              }
            });
            $.each(data_second, function (key, value) {
              xData.push(setHour(key));
              yData2.push(value);
            });
            var ops = {
              title: {
                top: '12px',
                text: 'ä»Šæ—¥ä¸æ˜¨æ—¥è®¿é—®ç»Ÿè®¡',
                left: '10px',
                textStyle: {
                  fontSize: '18',
                  color: '#333',
                }
              },
              color: ["#1AAD19", "#1890FF"],
              grid: {
                left: '16px',
                right: '30px',
                bottom: '12px',
                top: '60px',
                containLabel: true
              },
              tooltip: {
                trigger: 'axis',
                axisPointer: {
                  type: 'cross',
                  crossStyle: {
                    color: '#999'
                  }
                }
              },
              toolbox: {
                show: true,
              },
              legend: {
                data: ["ä»Šæ—¥", "æ˜¨æ—¥"],
                top: '18px',
              },
              xAxis: [{
                type: "category",
                boundaryGap: !1,
                data: xData,
                axisLine: {
                  lineStyle: {
                    color: '#999999',
                    width: 1,
                  }
                },
              }],
              yAxis: [{
                type: "value",
                axisLine: {
                  show: true,
                  lineStyle: {
                    color: '#999999',
                    width: 1,
                  }
                },
              }],
              series: [{
                name: "ä»Šæ—¥",
                type: "line",
                smooth: !0,
                itemStyle: {
                  normal: {
                    areaStyle: {
                      type: "default",
                      opacity: 0.2
                    }
                  }
                },
                data: yData1
              }, {
                name: "æ˜¨æ—¥",
                type: "line",
                smooth: !0,
                itemStyle: {
                  normal: {
                    areaStyle: {
                      type: "default",
                      opacity: 0.2
                    }
                  }
                },
                data: yData2
              }]
            }
            chartView.setOption(ops);


            let myChart = echarts.init(document.getElementById('chartYear'));
            let option = {
              title: {
                top: '12px',
                text: 'è¿‘ä¸€å¹´è®¿é—®ç»Ÿè®¡',
                left: '10px',
                textStyle: {
                  fontSize: '18',
                  color: '#333',
                }
              },
              tooltip: {
                padding: 6,
                formatter: function (obj) {
                  var value = obj.value;
                  return '<div style="font-size: 12px;">' + value[0] + 'ï¼š' + value[1] + ' ä¸ªè®¿å®¢</div>';
                }
              },
              visualMap: {
                min: 0,
                max: 500,
                show: false,
                inRange: {
                  color: ['#fafafa', '#1AAD19']
                }
              },
              calendar: {
                top: 75,
                left: 50,
                right: 20,
                range: getRange(),
                cellSize: ['auto', 21],
                splitLine: {
                  lineStyle: {
                    color: '#aaa',
                    type: 'dashed'
                  }
                },
                itemStyle: {
                  borderWidth: 0.5
                },
                yearLabel: { show: false },
                monthLabel: {
                  nameMap: 'cn',
                  fontSize: 12
                },
                dayLabel: {
                  show: true,
                  formatter: '{start}  1st',
                  fontWeight: 'lighter',
                  nameMap: ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'],
                  fontSize: 12
                }
              },
              series: [{
                type: 'heatmap',
                coordinateSystem: 'calendar',
                calendarIndex: 0,
                data: getDay()
              }]
            };
            myChart.setOption(option);

            setTimeout(function () {
              window.onresize = function () {
                chartView.resize();
                myChart.resize();
              }
            })
            console.log(e.data);
          }
        }
      })

      var archiveCalendar = {};
      function getRange() {
        let today = new Date();
        let tYear = today.getFullYear();
        let tMonth = today.getMonth() + 1;
        let tDate = today.getDate();
        let dateFirst = tYear + "-" + tMonth + "-" + tDate;
        let datelast = (tYear - 1) + "-" + tMonth + "-" + tDate;
        let dataRange = [];
        dataRange.push(dateFirst);
        dataRange.push(datelast);
        return dataRange;
      }

      function getDay() {
        var today = new Date();
        var dayArray = [];
        for (var i = 0; i < 366; i++) {
          var targetday_milliseconds = today.getTime() - 1000 * 60 * 60 * 24 * i;
          var date = new Date(targetday_milliseconds);
          dayArray.push(retunDay(date));
        }
        return dayArray;
      }

      function retunDay(day) {
        var tYear = day.getFullYear();
        var tMonth = day.getMonth();
        var tDate = day.getDate();
        tMonth = tMonth + 1;
        if (tMonth.toString().length == 1) {
          tMonth = "0" + tMonth;
        }
        if (tDate.toString().length == 1) {
          tDate = "0" + tDate;
        }
        var dateStr = tYear + "-" + tMonth + "-" + tDate;
        var dateArray = [];
        dateArray.push(dateStr);
        if (archiveCalendar[dateStr]) {
          dateArray.push(archiveCalendar[dateStr]);
        }
        else {
          dateArray.push(0);
        }
        return dateArray;
      }



    }

  </script>
  <script src="../../assets/libs/layui/layui.js"></script>
  <script src="../../assets/gougu/gouguInit.js"></script>
</body>

</html>